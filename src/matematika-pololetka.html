<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="subject" content="Math">
    <meta name="topic" content="PololetnÃ­ test">
    <meta name="template" content="practice">
    <title>âš¡ MATH MASTER - PololetnÃ­ PÃ­semka Trainer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Exo+2:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-pink: #ff2d95;
            --neon-blue: #00d4ff;
            --neon-purple: #b829dd;
            --neon-yellow: #ffe53b;
            --neon-green: #39ff14;
            --dark-bg: #0a0a1a;
            --card-bg: rgba(20, 20, 40, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--dark-bg);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============ SYNTHWAVE BACKGROUND ============ */
        .synthwave-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .sun {
            position: absolute;
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: linear-gradient(180deg, #ff6b35 0%, #ff2d95 50%, #b829dd 100%);
            box-shadow: 
                0 0 60px #ff2d95,
                0 0 100px #ff2d95,
                0 0 200px #b829dd;
            animation: pulse-sun 4s ease-in-out infinite;
        }

        .sun::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 8px,
                rgba(0,0,0,0.3) 8px,
                rgba(0,0,0,0.3) 16px
            );
        }

        @keyframes pulse-sun {
            0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.9; }
            50% { transform: translateX(-50%) scale(1.05); opacity: 1; }
        }

        .grid-floor {
            position: absolute;
            bottom: 0;
            left: -50%;
            width: 200%;
            height: 50%;
            background: 
                linear-gradient(90deg, rgba(0, 212, 255, 0.3) 1px, transparent 1px),
                linear-gradient(rgba(0, 212, 255, 0.3) 1px, transparent 1px);
            background-size: 60px 30px;
            transform: perspective(500px) rotateX(60deg);
            transform-origin: center top;
            animation: grid-move 2s linear infinite;
            mask-image: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
        }

        @keyframes grid-move {
            0% { background-position: 0 0; }
            100% { background-position: 0 30px; }
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                        radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                        radial-gradient(2px 2px at 160px 120px, rgba(255,255,255,0.9), transparent),
                        radial-gradient(1px 1px at 230px 80px, #fff, transparent),
                        radial-gradient(2px 2px at 300px 150px, rgba(255,255,255,0.7), transparent);
            background-repeat: repeat;
            background-size: 400px 200px;
            animation: twinkle 8s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .mountain {
            position: absolute;
            bottom: 25%;
            width: 100%;
            height: 200px;
        }

        .mountain::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 10%;
            width: 0;
            height: 0;
            border-left: 200px solid transparent;
            border-right: 200px solid transparent;
            border-bottom: 180px solid #1a1a3a;
            filter: drop-shadow(0 0 20px rgba(184, 41, 221, 0.3));
        }

        .mountain::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 15%;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-bottom: 140px solid #15152a;
            filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.3));
        }

        /* ============ FLOATING PARTICLES ============ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: float-up 15s linear infinite;
        }

        @keyframes float-up {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        /* ============ HEADER ============ */
        .header {
            position: relative;
            padding: 40px 20px;
            text-align: center;
            z-index: 10;
        }

        .logo {
            font-family: 'Audiowide', cursive;
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink), var(--neon-purple));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient-flow 5s ease infinite;
            text-shadow: none;
            filter: drop-shadow(0 0 30px rgba(255, 45, 149, 0.5));
            letter-spacing: 4px;
        }

        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-blue);
            font-size: 1rem;
            letter-spacing: 8px;
            margin-top: 10px;
            text-transform: uppercase;
            opacity: 0.8;
        }

        /* ============ STATS BAR ============ */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
        }

        .stat-icon {
            font-size: 1.5rem;
        }

        .stat-value {
            font-family: 'Audiowide', cursive;
            font-size: 1.3rem;
        }

        .stat-xp { color: var(--neon-yellow); border-color: rgba(255, 229, 59, 0.3); }
        .stat-level { color: var(--neon-purple); border-color: rgba(184, 41, 221, 0.3); }
        .stat-streak { 
            color: var(--neon-pink); 
            border-color: rgba(255, 45, 149, 0.3);
            animation: pulse-streak 1s ease-in-out infinite;
        }

        @keyframes pulse-streak {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 45, 149, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 45, 149, 0.6); }
        }

        /* ============ NAVIGATION ============ */
        .nav-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            flex-wrap: wrap;
            position: relative;
            z-index: 10;
        }

        .nav-btn {
            font-family: 'Audiowide', cursive;
            font-size: 0.9rem;
            padding: 18px 35px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            background: var(--card-bg);
            color: #888;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            letter-spacing: 2px;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover {
            transform: translateY(-3px) scale(1.02);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            color: white;
            box-shadow: 
                0 10px 40px rgba(255, 45, 149, 0.4),
                0 0 60px rgba(184, 41, 221, 0.2);
            border-color: transparent;
        }

        .nav-btn.active::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink), var(--neon-purple));
            z-index: -1;
            filter: blur(15px);
            opacity: 0.7;
        }

        /* ============ MAIN CONTENT ============ */
        .main-content {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ============ SECTION FILTER ============ */
        .section-filter {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .section-btn {
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            padding: 12px 25px;
            border: 2px solid var(--glass-border);
            border-radius: 15px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .section-btn:hover {
            border-color: var(--neon-blue);
            color: var(--neon-blue);
        }

        .section-btn.active {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(184, 41, 221, 0.2));
            border-color: var(--neon-blue);
            color: white;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        /* ============ TASK CARDS ============ */
        .task-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            position: relative;
        }

        .task-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink), var(--neon-purple));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .task-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(0, 212, 255, 0.1);
        }

        .task-card:hover::before {
            opacity: 1;
        }

        .task-header {
            padding: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .task-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .task-number {
            width: 55px;
            height: 55px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Audiowide', cursive;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .task-number.easy {
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.2), rgba(0, 212, 255, 0.2));
            border: 2px solid var(--neon-green);
            color: var(--neon-green);
        }

        .task-number.medium {
            background: linear-gradient(135deg, rgba(184, 41, 221, 0.2), rgba(255, 45, 149, 0.2));
            border: 2px solid var(--neon-purple);
            color: var(--neon-purple);
        }

        .task-number.hard {
            background: linear-gradient(135deg, rgba(255, 45, 149, 0.2), rgba(255, 107, 53, 0.2));
            border: 2px solid var(--neon-pink);
            color: var(--neon-pink);
            animation: glow-hard 2s ease-in-out infinite;
        }

        @keyframes glow-hard {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 45, 149, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 45, 149, 0.6); }
        }

        .task-info h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #fff;
        }

        .task-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            font-size: 0.75rem;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .badge-easy {
            background: rgba(57, 255, 20, 0.15);
            color: var(--neon-green);
            border: 1px solid rgba(57, 255, 20, 0.3);
        }

        .badge-medium {
            background: rgba(184, 41, 221, 0.15);
            color: var(--neon-purple);
            border: 1px solid rgba(184, 41, 221, 0.3);
        }

        .badge-hard {
            background: rgba(255, 45, 149, 0.15);
            color: var(--neon-pink);
            border: 1px solid rgba(255, 45, 149, 0.3);
        }

        .task-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .xp-badge {
            background: linear-gradient(135deg, rgba(255, 229, 59, 0.2), rgba(255, 107, 53, 0.2));
            border: 1px solid rgba(255, 229, 59, 0.3);
            padding: 8px 16px;
            border-radius: 12px;
            font-family: 'Audiowide', cursive;
            font-size: 0.85rem;
            color: var(--neon-yellow);
        }

        .expand-icon {
            font-size: 1.5rem;
            color: #666;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .task-card.expanded .expand-icon {
            transform: rotate(180deg);
            color: var(--neon-blue);
        }

        /* ============ TASK CONTENT ============ */
        .task-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .task-card.expanded .task-content {
            max-height: 3000px;
        }

        .task-inner {
            padding: 0 25px 25px;
        }

        .zadani-box {
            background: linear-gradient(135deg, rgba(255, 229, 59, 0.1), rgba(255, 107, 53, 0.1));
            border-left: 4px solid var(--neon-yellow);
            padding: 20px;
            border-radius: 0 15px 15px 0;
            margin-bottom: 25px;
        }

        .zadani-box h4 {
            font-family: 'Audiowide', cursive;
            font-size: 0.85rem;
            color: var(--neon-yellow);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .zadani-box p {
            color: #ddd;
            line-height: 1.6;
        }

        .postup-step {
            background: rgba(30, 30, 60, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .postup-step::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 60px;
            bottom: -15px;
            width: 2px;
            background: linear-gradient(180deg, var(--neon-blue), transparent);
        }

        .postup-step:last-child::before {
            display: none;
        }

        .step-header {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Audiowide', cursive;
            font-size: 0.9rem;
            flex-shrink: 0;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .step-content {
            flex: 1;
        }

        .step-content h5 {
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 12px;
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(184, 41, 221, 0.15), rgba(0, 212, 255, 0.15));
            border: 1px solid rgba(184, 41, 221, 0.3);
            border-radius: 12px;
            padding: 12px 18px;
            margin-bottom: 12px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-purple);
            font-size: 0.95rem;
            white-space: pre-line;
        }

        .calculation-box {
            background: rgba(10, 10, 30, 0.5);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            padding: 15px 18px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-blue);
            font-size: 0.9rem;
            white-space: pre-wrap;
            line-height: 1.8;
        }

        .vysledky-box {
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.1), rgba(0, 212, 255, 0.1));
            border-left: 4px solid var(--neon-green);
            padding: 20px;
            border-radius: 0 15px 15px 0;
            margin-top: 20px;
        }

        .vysledky-box h4 {
            font-family: 'Audiowide', cursive;
            font-size: 0.85rem;
            color: var(--neon-green);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .vysledky-box p {
            font-family: 'JetBrains Mono', monospace;
            color: #aaffaa;
            line-height: 1.8;
        }

        /* ============ FORMULAS TAB ============ */
        .formula-category {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .formula-category-header {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(184, 41, 221, 0.1));
            padding: 20px 25px;
            border-bottom: 1px solid var(--glass-border);
        }

        .formula-category-header h3 {
            font-family: 'Audiowide', cursive;
            font-size: 1.2rem;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
        }

        .formula-list {
            padding: 20px;
        }

        .formula-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px 20px;
            background: rgba(30, 30, 60, 0.3);
            border-radius: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .formula-item:hover {
            background: rgba(40, 40, 80, 0.5);
            border-color: var(--neon-blue);
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.1);
        }

        .formula-name {
            flex: 0 0 200px;
            color: #aaa;
            font-weight: 500;
        }

        .formula-value {
            flex: 1;
            font-family: 'JetBrains Mono', monospace;
            color: var(--neon-blue);
            font-size: 1rem;
            padding: 10px 20px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .tips-box {
            background: linear-gradient(135deg, rgba(255, 229, 59, 0.1), rgba(255, 45, 149, 0.1));
            border: 2px solid rgba(255, 229, 59, 0.3);
            border-radius: 25px;
            padding: 30px;
            margin-top: 30px;
        }

        .tips-box h3 {
            font-family: 'Audiowide', cursive;
            color: var(--neon-yellow);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tips-box ul {
            list-style: none;
        }

        .tips-box li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            color: #ccc;
            font-size: 1.05rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tips-box li:last-child {
            border-bottom: none;
        }

        .tips-box li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: var(--neon-pink);
            font-size: 1.2rem;
        }

        /* ============ QUIZ TAB ============ */
        .quiz-container {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink), var(--neon-purple), var(--neon-blue));
            background-size: 300% 100%;
            animation: gradient-flow 3s linear infinite;
        }

        .quiz-progress {
            margin-bottom: 30px;
        }

        .quiz-progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-family: 'Audiowide', cursive;
            font-size: 0.9rem;
        }

        .quiz-progress-header span:first-child {
            color: var(--neon-blue);
        }

        .quiz-progress-header span:last-child {
            color: var(--neon-green);
        }

        .progress-bar {
            height: 12px;
            background: rgba(30, 30, 60, 0.8);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink), var(--neon-purple));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(255, 45, 149, 0.5);
        }

        .quiz-question {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-question-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            display: inline-block;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .quiz-question h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: #fff;
            line-height: 1.5;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
        }

        .quiz-option {
            background: rgba(30, 30, 60, 0.5);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .quiz-option:hover:not(.disabled) {
            border-color: var(--neon-blue);
            background: rgba(0, 212, 255, 0.1);
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--neon-green);
            background: rgba(57, 255, 20, 0.15);
            box-shadow: 0 0 40px rgba(57, 255, 20, 0.3);
        }

        .quiz-option.wrong {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.15);
            box-shadow: 0 0 40px rgba(255, 68, 68, 0.3);
        }

        .quiz-option.disabled {
            cursor: default;
            opacity: 0.5;
        }

        .option-letter {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            background: rgba(0, 212, 255, 0.2);
            border: 2px solid var(--neon-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Audiowide', cursive;
            font-size: 1rem;
            color: var(--neon-blue);
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .quiz-option.correct .option-letter {
            background: var(--neon-green);
            border-color: var(--neon-green);
            color: #000;
        }

        .quiz-option.wrong .option-letter {
            background: #ff4444;
            border-color: #ff4444;
            color: #fff;
        }

        .option-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.05rem;
            color: #ddd;
            flex: 1;
        }

        .option-icon {
            font-size: 1.5rem;
        }

        /* ============ QUIZ RESULTS ============ */
        .quiz-results {
            text-align: center;
            padding: 40px 0;
        }

        .results-trophy {
            font-size: 6rem;
            margin-bottom: 20px;
            animation: trophy-bounce 1s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(255, 229, 59, 0.5));
        }

        @keyframes trophy-bounce {
            0%, 100% { transform: scale(1) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        .results-title {
            font-family: 'Audiowide', cursive;
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 30px;
        }

        .results-score {
            font-family: 'Audiowide', cursive;
            font-size: 5rem;
            margin: 30px 0;
        }

        .results-score .correct-count {
            color: var(--neon-green);
            text-shadow: 0 0 30px rgba(57, 255, 20, 0.5);
        }

        .results-score .total-count {
            color: #666;
        }

        .results-message {
            font-size: 1.3rem;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .results-stars {
            color: var(--neon-yellow);
            font-size: 2rem;
        }

        .quiz-history {
            background: rgba(30, 30, 60, 0.5);
            border-radius: 20px;
            padding: 20px;
            max-height: 250px;
            overflow-y: auto;
            margin-bottom: 30px;
            text-align: left;
        }

        .history-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-icon {
            font-size: 1.3rem;
        }

        .history-text {
            color: #aaa;
            font-size: 0.95rem;
        }

        .restart-btn {
            font-family: 'Audiowide', cursive;
            font-size: 1rem;
            padding: 20px 50px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            color: white;
            cursor: pointer;
            transition: all 0.4s ease;
            letter-spacing: 2px;
            box-shadow: 0 10px 40px rgba(184, 41, 221, 0.4);
        }

        .restart-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 60px rgba(255, 45, 149, 0.5);
        }

        /* ============ CONFETTI ============ */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* ============ FOOTER ============ */
        .footer {
            text-align: center;
            padding: 50px 20px;
            position: relative;
            z-index: 10;
        }

        .footer-text {
            font-family: 'Audiowide', cursive;
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.9rem;
            letter-spacing: 4px;
        }

        .footer-luck {
            font-size: 2rem;
            margin-top: 15px;
            color: var(--neon-pink);
            text-shadow: 0 0 20px rgba(255, 45, 149, 0.5);
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            
            .stats-bar {
                gap: 10px;
            }
            
            .stat-item {
                padding: 10px 20px;
            }
            
            .nav-btn {
                padding: 12px 20px;
                font-size: 0.8rem;
            }
            
            .task-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .task-right {
                width: 100%;
                justify-content: space-between;
            }
            
            .formula-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .formula-name {
                flex: none;
            }
            
            .quiz-container {
                padding: 25px;
            }
            
            .quiz-question h3 {
                font-size: 1.1rem;
            }
            
            .results-score {
                font-size: 3.5rem;
            }
        }

        /* ============ SCROLLBAR ============ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 40, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--neon-blue), var(--neon-purple));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--neon-pink), var(--neon-purple));
        }
    </style>
</head>
<body>
    <!-- Synthwave Background -->
    <div class="synthwave-bg">
        <div class="stars"></div>
        <div class="mountain"></div>
        <div class="sun"></div>
        <div class="grid-floor"></div>
    </div>

    <!-- Floating Particles -->
    <div class="particles" id="particles"></div>

    <!-- Confetti Container -->
    <div class="confetti" id="confetti"></div>

    <!-- Header -->
    <header class="header">
        <h1 class="logo">MATH MASTER</h1>
        <p class="subtitle">// PololetnÃ­ pÃ­semka trainer //</p>
        
        <div class="stats-bar">
            <div class="stat-item stat-xp">
                <span class="stat-icon">âš¡</span>
                <span class="stat-value" id="xp-display">0 XP</span>
            </div>
            <div class="stat-item stat-level">
                <span class="stat-icon">ğŸ¯</span>
                <span class="stat-value" id="level-display">LVL 1</span>
            </div>
            <div class="stat-item stat-streak" id="streak-container" style="display: none;">
                <span class="stat-icon">ğŸ”¥</span>
                <span class="stat-value" id="streak-display">0x</span>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-container">
        <button class="nav-btn active" data-tab="ulohy" onclick="switchTab('ulohy')">
            ğŸ“š ÃšLOHY
        </button>
        <button class="nav-btn" data-tab="vzorce" onclick="switchTab('vzorce')">
            ğŸ“ VZORCE
        </button>
        <button class="nav-btn" data-tab="kviz" onclick="switchTab('kviz')">
            ğŸ§  KVÃZ
        </button>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- ÃšLOHY TAB -->
        <div class="tab-content active" id="tab-ulohy">
            <div class="section-filter">
                <button class="section-btn active" data-section="A" onclick="filterSection('A')">
                    âš¡ PRAVOÃšHLÃ
                </button>
                <button class="section-btn" data-section="B" onclick="filterSection('B')">
                    ğŸ”º OBECNÃ
                </button>
                <button class="section-btn" data-section="C" onclick="filterSection('C')">
                    â¬¡ MNOHOÃšHELNÃKY
                </button>
            </div>
            
            <div id="tasks-container"></div>
        </div>

        <!-- VZORCE TAB -->
        <div class="tab-content" id="tab-vzorce">
            <div id="formulas-container"></div>
            
            <div class="tips-box">
                <h3>ğŸ’¡ PRO TIPS</h3>
                <ul>
                    <li>VÅ¾dy nejdÅ™Ã­v <strong>pÅ™esnÃ½ vÃ½sledek</strong>, pak zaokrouhlenÃ½</li>
                    <li>PodrobnÃ½ postup = vÃ­ce bodÅ¯ i pÅ™i chybÄ› ve vÃ½sledku</li>
                    <li>Nakresli si <strong>nÃ¡Ärt</strong> â€“ pomÅ¯Å¾e orientaci v Ãºloze</li>
                    <li>Zkontroluj <strong>jednotky a rozmÄ›ry</strong></li>
                    <li>U trojÃºhelnÃ­kÅ¯ vÅ¾dy zkontroluj <strong>trojÃºhelnÃ­kovou nerovnost</strong></li>
                </ul>
            </div>
        </div>

        <!-- KVÃZ TAB -->
        <div class="tab-content" id="tab-kviz">
            <div class="quiz-container">
                <div id="quiz-content"></div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p class="footer-text">// GOOD LUCK ON YOUR TEST //</p>
        <p class="footer-luck">ğŸš€ TO THE MOON! ğŸŒ™</p>
    </footer>

    <script>
        // ============ DATA ============
        const ulohy = [
            {
                id: 1, sekce: "A", nazev: "PravoÃºhlÃ½ trojÃºhelnÃ­k - vÃ½Å¡kovÃ¡ a Euklidova vÄ›ta", body: 10, difficulty: "hard",
                zadani: "Je dÃ¡n pravoÃºhlÃ½ trojÃºhelnÃ­k ABC s pÅ™eponou c. VÃ­me, Å¾e câ‚ = 6 cm a váµ§ = 4 cm.",
                postup: [
                    { krok: "VÃ½poÄet cáµ¦ z vÃ½Å¡kovÃ© vÄ›ty", vzorec: "váµ§Â² = câ‚ Â· cáµ¦", vypocet: "16 = 6 Â· cáµ¦\ncáµ¦ = 16/6 = 8/3 cm â‰ 2,67 cm" },
                    { krok: "VÃ½poÄet pÅ™epony c", vzorec: "c = câ‚ + cáµ¦", vypocet: "c = 6 + 8/3 = 26/3 cm â‰ 8,67 cm" },
                    { krok: "VÃ½poÄet odvÄ›sny a (Euklidova vÄ›ta)", vzorec: "aÂ² = c Â· câ‚", vypocet: "aÂ² = (26/3) Â· 6 = 52\na = 2âˆš13 cm â‰ 7,21 cm" },
                    { krok: "VÃ½poÄet odvÄ›sny b (Euklidova vÄ›ta)", vzorec: "bÂ² = c Â· cáµ¦", vypocet: "bÂ² = (26/3) Â· (8/3) = 208/9\nb = (4âˆš13)/3 cm â‰ 4,81 cm" },
                    { krok: "VÃ½poÄet ÃºhlÅ¯", vzorec: "sin Î± = a/c", vypocet: "Î± = arcsin((3âˆš13)/13) â‰ 56,31Â°\nÎ² = 90Â° - Î± â‰ 33,69Â°" },
                    { krok: "VÃ½poÄet obsahu", vzorec: "S = (1/2) Â· c Â· váµ§", vypocet: "S = (1/2) Â· (26/3) Â· 4 = 52/3 cmÂ² â‰ 17,33 cmÂ²" }
                ],
                vysledky: "a = 2âˆš13 â‰ 7,21 cm | b = (4âˆš13)/3 â‰ 4,81 cm | c = 26/3 â‰ 8,67 cm | S = 52/3 â‰ 17,33 cmÂ²"
            },
            {
                id: 2, sekce: "A", nazev: "PravoÃºhlÃ½ trojÃºhelnÃ­k - tÄ›Å¾nice", body: 10, difficulty: "hard",
                zadani: "Je dÃ¡n pravoÃºhlÃ½ trojÃºhelnÃ­k ABC s pÅ™eponou c. VÃ­me, Å¾e tâ‚ = 8 cm a táµ¦ = 12 cm.",
                postup: [
                    { krok: "OdvozenÃ­ vzorcÅ¯ pro tÄ›Å¾nice", vzorec: "tâ‚Â² = (aÂ² + 4bÂ²)/4\ntáµ¦Â² = (4aÂ² + bÂ²)/4", vypocet: "DosadÃ­me cÂ² = aÂ² + bÂ² do obecnÃ½ch vzorcÅ¯" },
                    { krok: "SestavenÃ­ soustavy rovnic", vzorec: "256 = aÂ² + 4bÂ²\n576 = 4aÂ² + bÂ²", vypocet: "Z prvnÃ­: aÂ² = 256 - 4bÂ²\nDo druhÃ©: 576 = 1024 - 15bÂ²\n15bÂ² = 448" },
                    { krok: "VÃ½poÄet stran", vzorec: "bÂ² = 448/15, aÂ² = 2048/15", vypocet: "a = (32âˆš30)/15 â‰ 11,68 cm\nb = (8âˆš105)/15 â‰ 5,46 cm\nc = âˆš(2496/15) â‰ 12,90 cm" }
                ],
                vysledky: "a â‰ 11,68 cm | b â‰ 5,46 cm | c â‰ 12,90 cm | Î± â‰ 64,89Â° | Î² â‰ 25,11Â°"
            },
            {
                id: 3, sekce: "A", nazev: "VÃ½Å¡ka vÄ›Å¾e - hloubkovÃ½ Ãºhel", body: 5, difficulty: "easy",
                zadani: "Z vrcholu vÄ›Å¾e vidÃ­me ÃºpatÃ­ brÃ¡ny vzdÃ¡lenÃ© 20 m pod hloubkovÃ½m Ãºhlem 50Â°.",
                postup: [
                    { krok: "Aplikace tangenty", vzorec: "tan 50Â° = h/20", vypocet: "h = 20 Â· tan 50Â°\nh = 20 Â· 1,1918 â‰ 23,84 m" }
                ],
                vysledky: "h = 20Â·tan 50Â° â‰ 23,84 m"
            },
            {
                id: 4, sekce: "A", nazev: "ÄŒtverec - ÃºhlopÅ™Ã­Äka a goniometrie 45Â°", body: 5, difficulty: "easy",
                zadani: "Ve Ätverci o stranÄ› x odvoÄte ÃºhlopÅ™Ã­Äku a goniometrickÃ© funkce pro 45Â°.",
                postup: [
                    { krok: "ÃšhlopÅ™Ã­Äka Ätverce", vzorec: "uÂ² = xÂ² + xÂ² = 2xÂ²", vypocet: "u = xâˆš2" },
                    { krok: "GoniometrickÃ© funkce pro 45Â°", vzorec: "TrojÃºhelnÃ­k 45Â°-45Â°-90Â°", vypocet: "sin 45Â° = cos 45Â° = âˆš2/2\ntan 45Â° = cot 45Â° = 1" }
                ],
                vysledky: "u = xâˆš2 | sin 45Â° = cos 45Â° = âˆš2/2 | tan 45Â° = cot 45Â° = 1"
            },
            {
                id: 5, sekce: "A", nazev: "RovnostrannÃ½ trojÃºhelnÃ­k - odvozenÃ­", body: 5, difficulty: "medium",
                zadani: "V rovnostrannÃ©m trojÃºhelnÃ­ku o obsahu S odvoÄte stranu, vÃ½Å¡ku a hodnoty sin 60Â°, cos 30Â°, cot 60Â°.",
                postup: [
                    { krok: "ZÃ¡kladnÃ­ vztahy", vzorec: "v = (aâˆš3)/2\nS = (aÂ²âˆš3)/4", vypocet: "VÃ½Å¡ka a obsah rovnostrannÃ©ho trojÃºhelnÃ­ku" },
                    { krok: "Strana a vÃ½Å¡ka v zÃ¡vislosti na S", vzorec: "a = 2Â·âˆš(Sâˆš3/3)\nv = âˆš(Sâˆš3)", vypocet: "VyjÃ¡dÅ™Ã­me a ze vzorce pro obsah" },
                    { krok: "GoniometrickÃ© hodnoty", vzorec: "Z trojÃºhelnÃ­ku 30Â°-60Â°-90Â°", vypocet: "sin 60Â° = cos 30Â° = âˆš3/2\ncot 60Â° = âˆš3/3" }
                ],
                vysledky: "a = 2âˆš(Sâˆš3/3) | v = âˆš(Sâˆš3) | sin 60Â° = cos 30Â° = âˆš3/2 | cot 60Â° = âˆš3/3"
            },
            {
                id: 6, sekce: "A", nazev: "Konstrukce âˆš6", body: 2, difficulty: "easy",
                zadani: "Bez pouÅ¾itÃ­ Pythagorovy vÄ›ty zkonstruujte ÃºseÄku dÃ©lky âˆš6.",
                postup: [
                    { krok: "Euklidova vÄ›ta o vÃ½Å¡ce", vzorec: "vÂ² = p Â· q â†’ v = âˆš(pÂ·q)", vypocet: "PotÅ™ebujeme p Â· q = 6\nVolÃ­me p = 2, q = 3" },
                    { krok: "Konstrukce", vzorec: "Thaletova kruÅ¾nice", vypocet: "1. ÃšseÄka AB dÃ©lky 5 (= 2 + 3)\n2. Bod C na AB: AC = 2, CB = 3\n3. Thaletova kruÅ¾nice nad AB\n4. Kolmice v bodÄ› C k AB\n5. PrÅ¯seÄÃ­k s kruÅ¾nicÃ­ = D\n6. |CD| = âˆš6" }
                ],
                vysledky: "CD = âˆš(2Â·3) = âˆš6"
            },
            {
                id: 7, sekce: "A", nazev: "RovnoramennÃ½ trojÃºhelnÃ­k - opsanÃ¡ kruÅ¾nice", body: 5, difficulty: "medium",
                zadani: "RovnoramennÃ½ trojÃºhelnÃ­k se zÃ¡kladnou 6 a vÃ½Å¡kou 4. UrÄete Ãºhel pÅ™i zÃ¡kladnÄ› a polomÄ›r opsanÃ© kruÅ¾nice.",
                postup: [
                    { krok: "VÃ½poÄet ramene", vzorec: "rÂ² = 3Â² + 4Â²", vypocet: "rÂ² = 9 + 16 = 25\nr = 5 cm" },
                    { krok: "Ãšhel pÅ™i zÃ¡kladnÄ›", vzorec: "cos Î² = pÅ™ilehlÃ¡/pÅ™epona = 3/5", vypocet: "Î² = arccos(0,6) â‰ 53,13Â°" },
                    { krok: "PolomÄ›r opsanÃ© kruÅ¾nice", vzorec: "R = (aÂ·bÂ·c)/(4S)", vypocet: "S = (1/2)Â·6Â·4 = 12 cmÂ²\nR = (5Â·5Â·6)/(4Â·12) = 150/48\nR = 25/8 = 3,125 cm" }
                ],
                vysledky: "Î² = arccos(3/5) â‰ 53,13Â° | R = 25/8 = 3,125 cm"
            },
            {
                id: 8, sekce: "A", nazev: "VÄ›Å¾ - dvojnÃ¡sobnÃ½ Ãºhel", body: 5, difficulty: "hard",
                zadani: "Z stanoviÅ¡tÄ› vidÃ­me vrchol vÄ›Å¾e pod 15Â°. Po pÅ™iblÃ­Å¾enÃ­ o 100 m vidÃ­me vrchol pod 30Â°. UrÄete vÃ½Å¡ku vÄ›Å¾e.",
                postup: [
                    { krok: "Soustava rovnic", vzorec: "tan 15Â° = h/(x+100)\ntan 30Â° = h/x", vypocet: "x = vzdÃ¡lenost od vÄ›Å¾e po pÅ™iblÃ­Å¾enÃ­\nh = x Â· tan 30Â° = x/âˆš3" },
                    { krok: "VÃ½poÄet tan 15Â°", vzorec: "tan 15Â° = tan(45Â°-30Â°) = 2 - âˆš3", vypocet: "PouÅ¾ijeme vzorec pro rozdÃ­l ÃºhlÅ¯" },
                    { krok: "Å˜eÅ¡enÃ­ soustavy", vzorec: "DosazenÃ­ a Ãºprava", vypocet: "Po ÃºpravÄ›: x = 50âˆš3 m\nh = 50âˆš3 Â· (1/âˆš3) = 50 m" }
                ],
                vysledky: "h = 50 m"
            },
            {
                id: 9, sekce: "A", nazev: "TÄ›tivovÃ½ ÄtyÅ™ÃºhelnÃ­k", body: 5, difficulty: "easy",
                zadani: "KruÅ¾nici je vepsÃ¡n ÄtyÅ™ÃºhelnÃ­k ABCD, kde Î± = 52Â° a Î² = 96Â°. VypoÄÃ­tejte zbÃ½vajÃ­cÃ­ Ãºhly.",
                postup: [
                    { krok: "Vlastnost tÄ›tivovÃ©ho ÄtyÅ™ÃºhelnÃ­ku", vzorec: "Î± + Î³ = 180Â°\nÎ² + Î´ = 180Â°", vypocet: "SouÄet protÄ›jÅ¡Ã­ch ÃºhlÅ¯ = 180Â°" },
                    { krok: "VÃ½poÄet ÃºhlÅ¯", vzorec: "Î³ = 180Â° - Î±\nÎ´ = 180Â° - Î²", vypocet: "Î³ = 180Â° - 52Â° = 128Â°\nÎ´ = 180Â° - 96Â° = 84Â°" }
                ],
                vysledky: "Î³ = 128Â° | Î´ = 84Â°"
            },
            {
                id: 10, sekce: "A", nazev: "Oblouky a obvodovÃ© Ãºhly", body: 5, difficulty: "medium",
                zadani: "TrojÃºhelnÃ­k ABC vepsanÃ½ do kruÅ¾nice dÄ›lÃ­ ji na oblouky v pomÄ›ru 1:3:8.",
                postup: [
                    { krok: "VÃ½poÄet obloukÅ¯", vzorec: "Celkem 360Â°, pomÄ›r 1:3:8", vypocet: "SouÄet dÃ­lÅ¯ = 1+3+8 = 12\nJeden dÃ­l = 360Â°/12 = 30Â°\nOblouky: 30Â°, 90Â°, 240Â°" },
                    { krok: "ObvodovÃ© Ãºhly", vzorec: "ObvodovÃ½ Ãºhel = Â½ pÅ™Ã­sluÅ¡nÃ©ho oblouku", vypocet: "Î± = 30Â°/2 = 15Â°\nÎ² = 90Â°/2 = 45Â°\nÎ³ = 240Â°/2 = 120Â°" }
                ],
                vysledky: "Î± = 15Â° | Î² = 45Â° | Î³ = 120Â°"
            },
            {
                id: 11, sekce: "B", nazev: "HeronÅ¯v vzorec", body: 5, difficulty: "medium",
                zadani: "TrojÃºhelnÃ­k mÃ¡ strany 4, 5 a 6. SpoÄÃ­tejte pÅ™esnÄ› jeho obsah.",
                postup: [
                    { krok: "PoloviÄnÃ­ obvod", vzorec: "s = (a+b+c)/2", vypocet: "s = (4+5+6)/2 = 15/2 = 7,5" },
                    { krok: "HeronÅ¯v vzorec", vzorec: "S = âˆš(s(s-a)(s-b)(s-c))", vypocet: "s-a = 7/2, s-b = 5/2, s-c = 3/2\nS = âˆš((15/2)Â·(7/2)Â·(5/2)Â·(3/2))\nS = âˆš(1575/16) = âˆš1575/4\nS = (15âˆš7)/4 cmÂ²" }
                ],
                vysledky: "S = (15âˆš7)/4 â‰ 9,92 cmÂ²"
            },
            {
                id: 12, sekce: "B", nazev: "Dva vlaky - kosinovÃ¡ vÄ›ta", body: 5, difficulty: "medium",
                zadani: "Dva vlaky vyrazÃ­ ze stejnÃ©ho mÃ­sta pod Ãºhlem 30Â°. RychlÃ­k: 34 m/s, osobnÃ­: 70 km/h. VzdÃ¡lenost za 45 min?",
                postup: [
                    { krok: "PÅ™evod jednotek a vÃ½poÄet drah", vzorec: "s = v Â· t", vypocet: "RychlÃ­k: 34 m/s = 122,4 km/h\nÄŒas: 45 min = 0,75 h\na = 122,4 Â· 0,75 = 91,8 km\nb = 70 Â· 0,75 = 52,5 km" },
                    { krok: "KosinovÃ¡ vÄ›ta", vzorec: "cÂ² = aÂ² + bÂ² - 2abÂ·cos Î³", vypocet: "cÂ² = 91,8Â² + 52,5Â² - 2Â·91,8Â·52,5Â·cos 30Â°\ncÂ² â‰ˆ 8427 + 2756 - 8347 â‰ˆ 2836\nc â‰ˆ 53,25 km" }
                ],
                vysledky: "c â‰ˆ 53,25 km"
            },
            {
                id: 13, sekce: "B", nazev: "Å Ã­Å™ka Å™eky - zornÃ½ Ãºhel", body: 5, difficulty: "hard",
                zadani: "Z pozorovatelny vysokÃ© 3 m, 1 m od bÅ™ehu, se Å™eka jevÃ­ pod zornÃ½m Ãºhlem 45Â°. Jak je Å¡irokÃ¡?",
                postup: [
                    { krok: "Ãšhel k bliÅ¾Å¡Ã­mu bÅ™ehu", vzorec: "tan Î± = vÃ½Å¡ka/vzdÃ¡lenost", vypocet: "tan Î± = 3/1 = 3\nÎ± = arctan(3) â‰ˆ 71,57Â°" },
                    { krok: "Ãšhel ke vzdÃ¡lenÄ›jÅ¡Ã­mu bÅ™ehu", vzorec: "Î± - Î² = 45Â° (zornÃ½ Ãºhel)", vypocet: "Î² = Î± - 45Â° â‰ˆ 26,57Â°" },
                    { krok: "VÃ½poÄet Å¡Ã­Å™ky", vzorec: "tan(arctan 3 - 45Â°) = 1/2", vypocet: "3/(1+x) = 1/2\n1+x = 6\nx = 5 m" }
                ],
                vysledky: "Å Ã­Å™ka Å™eky = 5 m"
            },
            {
                id: 14, sekce: "B", nazev: "SinovÃ¡ vÄ›ta", body: 5, difficulty: "medium",
                zadani: "b = 25 cm, c = 25âˆš2 cm, Î³ = 45Â°. UrÄete vÅ¡echny prvky trojÃºhelnÃ­ku.",
                postup: [
                    { krok: "SinovÃ¡ vÄ›ta pro Î²", vzorec: "b/sin Î² = c/sin Î³", vypocet: "25/sin Î² = 25âˆš2/sin 45Â°\n25/sin Î² = 25âˆš2/(âˆš2/2) = 50\nsin Î² = 1/2 â†’ Î² = 30Â°" },
                    { krok: "VÃ½poÄet Î±", vzorec: "Î± + Î² + Î³ = 180Â°", vypocet: "Î± = 180Â° - 30Â° - 45Â° = 105Â°" },
                    { krok: "VÃ½poÄet strany a", vzorec: "a/sin Î± = c/sin Î³", vypocet: "sin 105Â° = (âˆš6+âˆš2)/4\na = 25âˆš2 Â· sin 105Â°/sin 45Â°\na = 25(âˆš6+âˆš2)/2 â‰ˆ 48,30 cm" }
                ],
                vysledky: "Î± = 105Â° | Î² = 30Â° | a = 25(âˆš6+âˆš2)/2 â‰ˆ 48,30 cm"
            },
            {
                id: 15, sekce: "B", nazev: "LichobÄ›Å¾nÃ­k - vÃ½poÄet x", body: 5, difficulty: "medium",
                zadani: "LichobÄ›Å¾nÃ­k s delÅ¡Ã­ zÃ¡kladnou 20 m, Ãºhly pÅ™i nÃ­ 64Â° a 77Â°. UrÄete rameno x u Ãºhlu 77Â°.",
                postup: [
                    { krok: "AnalÃ½za lichobÄ›Å¾nÃ­ku", vzorec: "Ãšhly pÅ™i rameni = 180Â°", vypocet: "Ãšhly u delÅ¡Ã­ zÃ¡kladny: 64Â° a 77Â°\nÃšhly u kratÅ¡Ã­: 116Â° a 103Â°\nV pomocnÃ©m trojÃºhelnÃ­ku: 180Â° - 64Â° - 77Â° = 39Â°" },
                    { krok: "SinovÃ¡ vÄ›ta v pomocnÃ©m trojÃºhelnÃ­ku", vzorec: "x/sin 64Â° = 20/sin 39Â°", vypocet: "x = 20 Â· sin 64Â°/sin 39Â°\nx â‰ˆ 20 Â· 0,899/0,629\nx â‰ˆ 28,57 m" }
                ],
                vysledky: "x â‰ˆ 28,57 m"
            },
            {
                id: 16, sekce: "C", nazev: "PravidelnÃ½ 12-ÃºhelnÃ­k (opsanÃ¡ kruÅ¾nice)", body: 10, difficulty: "hard",
                zadani: "PravidelnÃ©mu 12-ÃºhelnÃ­ku je opsÃ¡na kruÅ¾nice r = 2 cm.",
                postup: [
                    { krok: "ZÃ¡kladnÃ­ parametry", vzorec: "Ï† = 360Â°/n = 30Â°", vypocet: "StÅ™edovÃ½ Ãºhel = 30Â°" },
                    { krok: "SouÄet a velikost vnitÅ™nÃ­ch ÃºhlÅ¯", vzorec: "Î£ = (n-2)Â·180Â°\nÎ± = Î£/n", vypocet: "Î£ = (12-2)Â·180Â° = 1800Â°\nÎ± = 1800Â°/12 = 150Â°" },
                    { krok: "DÃ©lka strany", vzorec: "a = 2rÂ·sin(Ï†/2)", vypocet: "a = 2Â·2Â·sin 15Â° = 4Â·(âˆš6-âˆš2)/4\na = âˆš6-âˆš2 â‰ˆ 1,04 cm" },
                    { krok: "Obsah", vzorec: "S = (1/2)Â·nÂ·rÂ²Â·sin Ï†", vypocet: "S = (1/2)Â·12Â·4Â·sin 30Â°\nS = 24Â·0,5 = 12 cmÂ²" },
                    { krok: "PolomÄ›r vepsanÃ© kruÅ¾nice", vzorec: "Ï = rÂ·cos(Ï†/2)", vypocet: "Ï = 2Â·cos 15Â° = 2Â·(âˆš6+âˆš2)/4\nÏ = (âˆš6+âˆš2)/2 â‰ˆ 1,93 cm" }
                ],
                vysledky: "Î£ = 1800Â° | Î± = 150Â° | a â‰ˆ 1,04 cm | S = 12 cmÂ² | Ï â‰ˆ 1,93 cm"
            },
            {
                id: 17, sekce: "C", nazev: "PravidelnÃ½ 15-ÃºhelnÃ­k (vepsanÃ¡ kruÅ¾nice)", body: 10, difficulty: "hard",
                zadani: "PravidelnÃ©mu 15-ÃºhelnÃ­ku je vepsÃ¡na kruÅ¾nice Ï = 4 cm.",
                postup: [
                    { krok: "ZÃ¡kladnÃ­ parametry", vzorec: "Ï† = 360Â°/n = 24Â°", vypocet: "StÅ™edovÃ½ Ãºhel = 24Â°" },
                    { krok: "SouÄet a velikost vnitÅ™nÃ­ch ÃºhlÅ¯", vzorec: "Î£ = (n-2)Â·180Â°\nÎ± = Î£/n", vypocet: "Î£ = (15-2)Â·180Â° = 2340Â°\nÎ± = 2340Â°/15 = 156Â°" },
                    { krok: "DÃ©lka strany", vzorec: "a = 2ÏÂ·tan(Ï†/2)", vypocet: "a = 2Â·4Â·tan 12Â°\na = 8Â·tan 12Â° â‰ˆ 1,70 cm" },
                    { krok: "Obsah", vzorec: "S = nÂ·ÏÂ²Â·tan(Ï†/2)", vypocet: "S = 15Â·16Â·tan 12Â°\nS = 240Â·tan 12Â° â‰ˆ 51,02 cmÂ²" },
                    { krok: "PolomÄ›r opsanÃ© kruÅ¾nice", vzorec: "r = Ï/cos(Ï†/2)", vypocet: "r = 4/cos 12Â° â‰ˆ 4,09 cm" }
                ],
                vysledky: "Î£ = 2340Â° | Î± = 156Â° | a â‰ˆ 1,70 cm | S â‰ˆ 51,02 cmÂ² | r â‰ˆ 4,09 cm"
            },
            {
                id: 18, sekce: "C", nazev: "PoÄet ÃºhlopÅ™Ã­Äek", body: 5, difficulty: "easy",
                zadani: "MnohoÃºhelnÃ­k s x vrcholy mÃ¡ 1595 ÃºhlopÅ™Ã­Äek. UrÄete x.",
                postup: [
                    { krok: "Vzorec pro ÃºhlopÅ™Ã­Äky", vzorec: "D = n(n-3)/2", vypocet: "1595 = x(x-3)/2\n3190 = xÂ² - 3x\nxÂ² - 3x - 3190 = 0" },
                    { krok: "Å˜eÅ¡enÃ­ kvadratickÃ© rovnice", vzorec: "x = (3 Â± âˆšD)/2", vypocet: "D = 9 + 4Â·3190 = 12769 = 113Â²\nx = (3 + 113)/2 = 58" }
                ],
                vysledky: "x = 58 vrcholÅ¯"
            }
        ];

        const vzorce = {
            "âš¡ PRAVOÃšHLÃ TROJÃšHELNÃK": [
                { nazev: "Pythagorova vÄ›ta", vzorec: "aÂ² + bÂ² = cÂ²" },
                { nazev: "VÃ½Å¡kovÃ¡ vÄ›ta", vzorec: "váµ§Â² = câ‚ Â· cáµ¦" },
                { nazev: "Euklidova vÄ›ta (a)", vzorec: "aÂ² = c Â· câ‚" },
                { nazev: "Euklidova vÄ›ta (b)", vzorec: "bÂ² = c Â· cáµ¦" },
                { nazev: "TÄ›Å¾nice na pÅ™eponu", vzorec: "táµ§ = c/2" },
                { nazev: "Obsah", vzorec: "S = (1/2)Â·aÂ·b = (1/2)Â·cÂ·váµ§" }
            ],
            "ğŸ”º OBECNÃ TROJÃšHELNÃK": [
                { nazev: "SinovÃ¡ vÄ›ta", vzorec: "a/sin Î± = b/sin Î² = c/sin Î³ = 2R" },
                { nazev: "KosinovÃ¡ vÄ›ta", vzorec: "cÂ² = aÂ² + bÂ² - 2abÂ·cos Î³" },
                { nazev: "HeronÅ¯v vzorec", vzorec: "S = âˆš(s(s-a)(s-b)(s-c))" },
                { nazev: "PoloviÄnÃ­ obvod", vzorec: "s = (a+b+c)/2" },
                { nazev: "PolomÄ›r opsanÃ© kruÅ¾nice", vzorec: "R = (aÂ·bÂ·c)/(4S)" }
            ],
            "â¬¡ PRAVIDELNÃ N-ÃšHELNÃK": [
                { nazev: "StÅ™edovÃ½ Ãºhel", vzorec: "Ï† = 360Â°/n" },
                { nazev: "SouÄet vnitÅ™nÃ­ch ÃºhlÅ¯", vzorec: "Î£ = (n-2)Â·180Â°" },
                { nazev: "Jeden vnitÅ™nÃ­ Ãºhel", vzorec: "Î± = (n-2)Â·180Â°/n" },
                { nazev: "Strana (opsanÃ¡ kruÅ¾nice)", vzorec: "a = 2rÂ·sin(Ï†/2)" },
                { nazev: "Strana (vepsanÃ¡ kruÅ¾nice)", vzorec: "a = 2ÏÂ·tan(Ï†/2)" },
                { nazev: "VepsanÃ¡ z opsanÃ©", vzorec: "Ï = rÂ·cos(Ï†/2)" },
                { nazev: "Obsah (opsanÃ¡)", vzorec: "S = (1/2)Â·nÂ·rÂ²Â·sin Ï†" },
                { nazev: "PoÄet ÃºhlopÅ™Ã­Äek", vzorec: "D = n(n-3)/2" }
            ],
            "ğŸ¯ GONIOMETRICKÃ‰ HODNOTY": [
                { nazev: "sin 30Â° = cos 60Â°", vzorec: "1/2" },
                { nazev: "sin 45Â° = cos 45Â°", vzorec: "âˆš2/2" },
                { nazev: "sin 60Â° = cos 30Â°", vzorec: "âˆš3/2" },
                { nazev: "tan 45Â°", vzorec: "1" },
                { nazev: "tan 30Â° = cot 60Â°", vzorec: "âˆš3/3" },
                { nazev: "tan 60Â° = cot 30Â°", vzorec: "âˆš3" },
                { nazev: "sin 15Â°", vzorec: "(âˆš6-âˆš2)/4" },
                { nazev: "cos 15Â°", vzorec: "(âˆš6+âˆš2)/4" },
                { nazev: "tan 15Â°", vzorec: "2 - âˆš3" }
            ],
            "â­• KRUÅ½NICE A ÃšHLY": [
                { nazev: "ObvodovÃ½ Ãºhel", vzorec: "= (1/2) Ã— stÅ™edovÃ½ Ãºhel" },
                { nazev: "TÄ›tivovÃ½ ÄtyÅ™ÃºhelnÃ­k", vzorec: "Î± + Î³ = 180Â° (protÄ›jÅ¡Ã­)" },
                { nazev: "Thaletova vÄ›ta", vzorec: "ObvodovÃ½ nad prÅ¯mÄ›rem = 90Â°" }
            ]
        };

        const kvizOtazky = [
            { otazka: "JakÃ½ je vzorec pro vÃ½Å¡kovou vÄ›tu v pravoÃºhlÃ©m trojÃºhelnÃ­ku?", moznosti: ["váµ§Â² = câ‚ Â· cáµ¦", "váµ§ = câ‚ + cáµ¦", "váµ§Â² = câ‚ + cáµ¦", "váµ§ = câ‚ Â· cáµ¦"], spravna: 0 },
            { otazka: "Kolik je sin 60Â°?", moznosti: ["1/2", "âˆš2/2", "âˆš3/2", "1"], spravna: 2 },
            { otazka: "JakÃ½ je souÄet vnitÅ™nÃ­ch ÃºhlÅ¯ desetiÃºhelnÃ­ku?", moznosti: ["1440Â°", "1620Â°", "1800Â°", "1260Â°"], spravna: 0 },
            { otazka: "V tÄ›tivovÃ©m ÄtyÅ™ÃºhelnÃ­ku platÃ­, Å¾e souÄet protÄ›jÅ¡Ã­ch ÃºhlÅ¯ je:", moznosti: ["90Â°", "180Â°", "270Â°", "360Â°"], spravna: 1 },
            { otazka: "JakÃ½ je vzorec pro poÄet ÃºhlopÅ™Ã­Äek n-ÃºhelnÃ­ku?", moznosti: ["n(n-1)/2", "n(n-2)/2", "n(n-3)/2", "n(n+1)/2"], spravna: 2 },
            { otazka: "ObvodovÃ½ Ãºhel je oproti stÅ™edovÃ©mu Ãºhlu:", moznosti: ["StejnÃ½", "DvojnÃ¡sobnÃ½", "PoloviÄnÃ­", "TÅ™etinovÃ½"], spravna: 2 },
            { otazka: "TÄ›Å¾nice na pÅ™eponu v pravoÃºhlÃ©m trojÃºhelnÃ­ku mÃ¡ dÃ©lku:", moznosti: ["c", "c/2", "c/3", "2c"], spravna: 1 },
            { otazka: "Kolik je tan 45Â°?", moznosti: ["0", "1/2", "1", "âˆš2"], spravna: 2 },
            { otazka: "HeronÅ¯v vzorec slouÅ¾Ã­ k vÃ½poÄtu:", moznosti: ["Obvodu trojÃºhelnÃ­ku", "Obsahu trojÃºhelnÃ­ku", "VÃ½Å¡ky trojÃºhelnÃ­ku", "PolomÄ›ru kruÅ¾nice"], spravna: 1 },
            { otazka: "Pro stranu pravidelnÃ©ho n-ÃºhelnÃ­ku s opsanou kruÅ¾nicÃ­ r platÃ­:", moznosti: ["a = rÂ·sin(180Â°/n)", "a = 2rÂ·sin(180Â°/n)", "a = rÂ·cos(180Â°/n)", "a = 2rÂ·cos(180Â°/n)"], spravna: 1 },
            { otazka: "JakÃ¡ je Euklidova vÄ›ta pro odvÄ›snu a?", moznosti: ["aÂ² = c Â· câ‚", "aÂ² = c Â· cáµ¦", "aÂ² = câ‚ Â· cáµ¦", "a = c Â· câ‚"], spravna: 0 },
            { otazka: "Kolik je cos 45Â°?", moznosti: ["1/2", "âˆš2/2", "âˆš3/2", "1"], spravna: 1 },
            { otazka: "StÅ™edovÃ½ Ãºhel pravidelnÃ©ho Å¡estiÃºhelnÃ­ku je:", moznosti: ["30Â°", "45Â°", "60Â°", "72Â°"], spravna: 2 },
            { otazka: "KosinovÃ¡ vÄ›ta mÃ¡ tvar:", moznosti: ["cÂ² = aÂ² + bÂ²", "cÂ² = aÂ² + bÂ² + 2abÂ·cos Î³", "cÂ² = aÂ² + bÂ² - 2abÂ·cos Î³", "c = a + b - 2abÂ·cos Î³"], spravna: 2 },
            { otazka: "Jeden vnitÅ™nÃ­ Ãºhel pravidelnÃ©ho 12-ÃºhelnÃ­ku mÃ¡ velikost:", moznosti: ["144Â°", "150Â°", "156Â°", "160Â°"], spravna: 1 }
        ];

        // ============ STATE ============
        let xp = 0;
        let level = 1;
        let streak = 0;
        let currentSection = 'A';
        let quizIndex = 0;
        let quizAnswers = [];
        let quizFinished = false;
        let selectedAnswer = null;
        let showResult = false;

        // ============ INITIALIZE ============
        function init() {
            createParticles();
            renderTasks();
            renderFormulas();
            renderQuiz();
        }

        function createParticles() {
            const container = document.getElementById('particles');
            const colors = ['#ff2d95', '#00d4ff', '#b829dd', '#ffe53b', '#39ff14'];
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // ============ NAVIGATION ============
        function switchTab(tabName) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tabName);
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === 'tab-' + tabName);
            });
        }

        function filterSection(section) {
            currentSection = section;
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.section === section);
            });
            renderTasks();
        }

        // ============ RENDER TASKS ============
        function renderTasks() {
            const container = document.getElementById('tasks-container');
            const filtered = ulohy.filter(u => u.sekce === currentSection);
            
            container.innerHTML = filtered.map(uloha => `
                <div class="task-card" id="task-${uloha.id}">
                    <div class="task-header" onclick="toggleTask(${uloha.id}, ${uloha.body})">
                        <div class="task-left">
                            <div class="task-number ${uloha.difficulty}">${uloha.id}</div>
                            <div class="task-info">
                                <h3>${uloha.nazev}</h3>
                                <div class="task-badges">
                                    <span class="badge badge-${uloha.difficulty}">
                                        ${uloha.difficulty === 'hard' ? 'ğŸ”¥ HARD' : uloha.difficulty === 'medium' ? 'âš¡ MEDIUM' : 'âœ¨ EASY'}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="task-right">
                            <span class="xp-badge">+${uloha.body} XP</span>
                            <span class="expand-icon">â–¼</span>
                        </div>
                    </div>
                    <div class="task-content">
                        <div class="task-inner">
                            <div class="zadani-box">
                                <h4>ğŸ“‹ ZADÃNÃ</h4>
                                <p>${uloha.zadani}</p>
                            </div>
                            
                            ${uloha.postup.map((step, idx) => `
                                <div class="postup-step">
                                    <div class="step-header">
                                        <div class="step-number">${idx + 1}</div>
                                        <div class="step-content">
                                            <h5>${step.krok}</h5>
                                            <div class="formula-box">${step.vzorec}</div>
                                            <div class="calculation-box">${step.vypocet}</div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                            
                            <div class="vysledky-box">
                                <h4>âœ… VÃSLEDKY</h4>
                                <p>${uloha.vysledky}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleTask(id, points) {
            const card = document.getElementById('task-' + id);
            const wasExpanded = card.classList.contains('expanded');
            
            if (!wasExpanded) {
                addXP(5);
            }
            
            card.classList.toggle('expanded');
        }

        // ============ RENDER FORMULAS ============
        function renderFormulas() {
            const container = document.getElementById('formulas-container');
            
            container.innerHTML = Object.entries(vzorce).map(([category, formulas]) => `
                <div class="formula-category">
                    <div class="formula-category-header">
                        <h3>${category}</h3>
                    </div>
                    <div class="formula-list">
                        ${formulas.map(f => `
                            <div class="formula-item">
                                <span class="formula-name">${f.nazev}</span>
                                <code class="formula-value">${f.vzorec}</code>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // ============ QUIZ ============
        function renderQuiz() {
            const container = document.getElementById('quiz-content');
            
            if (quizFinished) {
                const correct = quizAnswers.filter(a => a.correct).length;
                const stars = correct >= 13 ? 'â­â­â­' : correct >= 10 ? 'â­â­' : 'â­';
                const message = correct >= 13 ? 'LEGENDARY! Jsi pÅ™ipraven/a!' : 
                               correct >= 10 ? 'GREAT! JeÅ¡tÄ› trochu procviÄ.' : 
                               'KEEP GOING! Projdi si vzorce.';
                const messageColor = correct >= 13 ? '#39ff14' : correct >= 10 ? '#ffe53b' : '#ff6b35';
                
                container.innerHTML = `
                    <div class="quiz-results">
                        <div class="results-trophy">ğŸ†</div>
                        <h2 class="results-title">MISSION COMPLETE!</h2>
                        
                        <div class="results-score">
                            <span class="correct-count">${correct}</span>
                            <span class="total-count">/${kvizOtazky.length}</span>
                        </div>
                        
                        <div class="results-message" style="color: ${messageColor}">
                            <span class="results-stars">${stars}</span>
                            <span>${message}</span>
                        </div>
                        
                        <div class="quiz-history">
                            ${quizAnswers.map((a, i) => `
                                <div class="history-item">
                                    <span class="history-icon">${a.correct ? 'âœ…' : 'âŒ'}</span>
                                    <span class="history-text">${kvizOtazky[i].otazka}</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <button class="restart-btn" onclick="restartQuiz()">
                            ğŸ”„ PLAY AGAIN
                        </button>
                    </div>
                `;
                return;
            }
            
            const q = kvizOtazky[quizIndex];
            const progress = (quizIndex / kvizOtazky.length) * 100;
            const correctCount = quizAnswers.filter(a => a.correct).length;
            
            container.innerHTML = `
                <div class="quiz-progress">
                    <div class="quiz-progress-header">
                        <span>OTÃZKA ${quizIndex + 1}/${kvizOtazky.length}</span>
                        <span>${correctCount} SPRÃVNÄš</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <div class="quiz-question-icon">ğŸ¯</div>
                    <h3>${q.otazka}</h3>
                </div>
                
                <div class="quiz-options">
                    ${q.moznosti.map((m, i) => {
                        let classes = 'quiz-option';
                        if (showResult) {
                            classes += ' disabled';
                            if (i === q.spravna) classes += ' correct';
                            else if (i === selectedAnswer) classes += ' wrong';
                        }
                        return `
                            <div class="${classes}" onclick="selectAnswer(${i})">
                                <span class="option-letter">${String.fromCharCode(65 + i)}</span>
                                <span class="option-text">${m}</span>
                                ${showResult && i === q.spravna ? '<span class="option-icon">âœ“</span>' : ''}
                                ${showResult && i === selectedAnswer && i !== q.spravna ? '<span class="option-icon">âœ—</span>' : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function selectAnswer(index) {
            if (showResult) return;
            
            selectedAnswer = index;
            showResult = true;
            
            const isCorrect = index === kvizOtazky[quizIndex].spravna;
            
            if (isCorrect) {
                streak++;
                addXP(20 + streak * 5);
                if (streak >= 2) showConfetti();
                updateStreak();
            } else {
                streak = 0;
                updateStreak();
            }
            
            quizAnswers.push({ index: quizIndex, answer: index, correct: isCorrect });
            
            renderQuiz();
            
            setTimeout(() => {
                if (quizIndex < kvizOtazky.length - 1) {
                    quizIndex++;
                    selectedAnswer = null;
                    showResult = false;
                } else {
                    quizFinished = true;
                }
                renderQuiz();
            }, 1500);
        }

        function restartQuiz() {
            quizIndex = 0;
            quizAnswers = [];
            quizFinished = false;
            selectedAnswer = null;
            showResult = false;
            streak = 0;
            updateStreak();
            renderQuiz();
        }

        // ============ XP & LEVEL ============
        function addXP(amount) {
            xp += amount;
            level = Math.floor(xp / 100) + 1;
            document.getElementById('xp-display').textContent = xp + ' XP';
            document.getElementById('level-display').textContent = 'LVL ' + level;
        }

        function updateStreak() {
            const container = document.getElementById('streak-container');
            const display = document.getElementById('streak-display');
            
            if (streak > 0) {
                container.style.display = 'flex';
                display.textContent = streak + 'x';
            } else {
                container.style.display = 'none';
            }
        }

        // ============ CONFETTI ============
        function showConfetti() {
            const container = document.getElementById('confetti');
            container.innerHTML = '';
            
            const colors = ['#ff2d95', '#00d4ff', '#b829dd', '#ffe53b', '#39ff14', '#ff6b35'];
            
            for (let i = 0; i < 50; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + '%';
                piece.style.background = colors[Math.floor(Math.random() * colors.length)];
                piece.style.animationDelay = Math.random() * 0.5 + 's';
                piece.style.animationDuration = (2 + Math.random()) + 's';
                container.appendChild(piece);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
